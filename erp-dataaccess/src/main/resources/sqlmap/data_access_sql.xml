<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data_access_sql">
	<sql id="purchase_control">
		<if test="maps.queryParam.dataAccessUserIdList != null">
			AND epo.create_user in
			<foreach item="item" index="index" collection="maps.queryParam.dataAccessUserIdList" open="(" separator="," close=")">
				#{item}
			</foreach>
		</if>
	</sql>
	<sql id="purchase_delivery_control">
		<if test="maps.queryParam.dataAccessUserIdList != null">
			AND epdo.create_user in
			<foreach item="item" index="index" collection="maps.queryParam.dataAccessUserIdList" open="(" separator="," close=")">
				#{item}
			</foreach>
		</if>
	</sql>
	<sql id="purchase_receive_control">
		<if test="maps.queryParam.dataAccessUserIdList != null &amp;&amp;maps.queryParam.dataAccessWarehouseIdList != null ">
			AND
			(
			(epro.create_user in
			<foreach item="item" index="index" collection="maps.queryParam.dataAccessUserIdList" open="(" separator=","
					 close=")">
				#{item}
			</foreach>
			) or
			(epro.warehouse_id in
			<foreach item="item" index="index" collection="maps.queryParam.dataAccessWarehouseIdList" open="(" separator=","
					 close=")">
				#{item}
			</foreach>
			)
			)
		</if>
	</sql>

	<sql id="order_control">
		<if test="maps.orderQueryParam.dataAccessUserIdList != null">
			AND (eo.create_user in
			<foreach item="item" index="index" collection="maps.orderQueryParam.dataAccessUserIdList" open="("
					 separator="," close=")">
				#{item}
			</foreach>)
			<if test="maps.orderQueryParam.dataAccessSubCompanyId != null &amp;&amp; maps.orderQueryParam.dataAccessSubCompanyId != ''">
				OR (
					and eo.order_sub_company_id = #{maps.orderQueryParam.dataAccessSubCompanyId, jdbcType=INTEGER}
				)
			</if>

		</if>
	</sql>

	<sql id="customer_control">
		<if test="maps.queryParam.dataAccessUserIdList != null">
			AND ec.create_user in
			<foreach item="item" index="index" collection="maps.queryParam.dataAccessUserIdList" open="(" separator="," close=")">
				#{item}
			</foreach>
		</if>
	</sql>

	<sql id="change_order_control">
		<if test="maps.queryParam.dataAccessUserIdList != null">
			AND eco.create_user in
			<foreach item="item" index="index" collection="maps.queryParam.dataAccessUserIdList" open="(" separator="," close=")">
				#{item}
			</foreach>
		</if>
	</sql>

	<sql id="return_order_control">
		<if test="maps.queryParam.dataAccessUserIdList != null">
			AND ero.create_user in
			<foreach item="item" index="index" collection="maps.queryParam.dataAccessUserIdList" open="(" separator="," close=")">
				#{item}
			</foreach>
		</if>
	</sql>


</mapper>